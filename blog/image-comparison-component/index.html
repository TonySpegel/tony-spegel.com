<!DOCTYPE html>

<!doctype html>
<html lang="de">
  
  <head>
  
  








<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Comparison Component</title>
<meta name="description" content="Drei Varianten einer Web Component um zwei Bilder miteinander zu vergleichen.">
<meta name="generator" content="Eleventy v2.0.1">
<meta name="theme-color" content="#d5d5ff" media="(prefers-color-scheme: light)">
<meta property="og:title" content="Image Comparison Component">
<meta property="og:description" content="Drei Varianten einer Web Component um zwei Bilder miteinander zu vergleichen.">

<meta property="og:image" content="https://tony-spegel.com/img/social-images/2023/image-comparison-component-flowers.jpg">

<meta name="version" content="6.1.5">


  

  <style>
    
      *{margin:0;padding:0}*,:after,:before{box-sizing:border-box}h1{font-size:2em;margin:var(--base-gap) 0}p:not(.post-summary){line-height:1.9;font-size:clamp(1rem, .96rem + .18vw, 1.125rem);margin-block-end:var(--base-gap)}.glass{position:fixed;width:100vw;height:100vh;background-color:var(--glass-tint);backdrop-filter:blur(70px);z-index:0}.bubble{border-radius:65% 41% 48% 61%/61% 47% 57% 43%;width:var(--bubble-size);height:var(--bubble-size);background-color:var(--bubble-1--color-1);background-image:linear-gradient(19deg,var(--bubble-1--color-1) 0,var(--bubble-1--color-2) 100%);z-index:-1;position:fixed;right:-35px;top:-50px}.bubble-2{border-radius:72% 80% 70% 63%/83% 50% 100% 43%;width:var(--bubble-size);height:var(--bubble-size);background-color:var(--bubble-2--color-1);background-image:linear-gradient(226deg,var(--bubble-2--color-1) 0,var(--bubble-2--color-2) 100%);z-index:-1;bottom:-120px;position:fixed}#site-header{position:sticky;top:0;line-height:1;z-index:2}#site-header.opaque{background-color:var(--header-bg-color);border-bottom:2px solid var(--surface-4)}#site-header.opaque .logo{box-shadow:var(--shadow-2)}.logo{transition:transform ease .5s,box-shadow ease .5s}#site-header>*{margin:0}#site-header>nav{display:flex;align-items:center;justify-content:space-between;height:var(--header-height);padding:var(--base-gap)}.logo{display:flex;gap:var(--base-gap);align-items:center;border-radius:15px;padding:var(--logo-padding);width:var(--logo-size);height:var(--logo-size);transition:transform .1s ease-in-out;aspect-ratio:1/1;border:1px solid transparent;background-color:var(--logo-bg-color)}.logo img{width:100%;height:100%}#btn-theme-selection{border-radius:50%;border:2px solid hsla(281,53%,97%,.63);width:25px;aspect-ratio:1;background:linear-gradient(-45deg,#ca98e1,#20d4fc);transition:border .5s ease-out}#btn-theme-selection:is(:focus,:hover){border-color:hsla(281,100%,63%,.75)}:where(html){--base-gap:16px;--base-radius:8px;--site-max-width:1280px;--site-width:960px;--base-line-height:1.25;--logo-size:56px;--logo-padding:2px;--header-height:100px;--shadow-color:220 3% 15%;--shadow-strength:1%;--shadow-2:0 3px 5px -2px hsl(var(--shadow-color) /
          calc(var(--shadow-strength) + 3%)),0 7px 14px -5px hsl(var(--shadow-color) / calc(var(--shadow-strength) + 5%));--tag-border-radius:18px;--detail-summary-icon-size:24px}:where(h1,h2,h3,h4,h5,h6){line-height:var(--base-line-height)}theme-switch{--base-gap:16px}theme-switch:not(:defined) [slot]{display:none}toc-observer ol{list-style-type:none;line-height:1;padding:0}toc-observer ol:not(:first-child){padding-inline:0.85em}toc-observer a{display:flex;border-left:2px solid var(--toc-item-border-default-color);padding:calc(var(--base-gap)/ 2) var(--base-gap);color:var(--text-color-1);transition:all 50ms ease-in-out;text-decoration:none}toc-observer a:is(:hover,:focus,.toc-active){border-left-color:var(--toc-item-border-active-color)}[theme-preference=dark] .dropdown__toc{border:1px solid var(--surface-4);background-color:var(--surface-5)}theme-switch{--base-gap:16px}theme-switch:not(:defined) [slot]{display:none}toc-observer ol{list-style-type:none;line-height:1;padding:0}toc-observer ol:not(:first-child){padding-inline:0.85em}toc-observer a{display:flex;border-left:2px solid var(--toc-item-border-default-color);padding:calc(var(--base-gap)/ 2) var(--base-gap);color:var(--text-color-1);transition:all 50ms ease-in-out;text-decoration:none}toc-observer a:is(:hover,:focus,.toc-active){border-left-color:var(--toc-item-border-active-color)}[theme-preference=dark] .dropdown__toc{border:1px solid var(--surface-4);background-color:var(--surface-5)}:where(html){--shade-50:hsla(281, 53%, 97%, 1);--shade-50-glass:hsla(281, 53%, 97%, 0.63);--shade-100:hsla(281, 56%, 94%, 1);--shade-200:hsla(281, 56%, 84%, 1);--shade-300:hsla(281, 55%, 74%, 1);--shade-400:hsla(281, 55%, 55%, 1);--shade-500:hsla(281, 100%, 35%, 1);--shade-600:hsla(281, 100%, 32%, 1);--shade-700:hsla(281, 100%, 27%, 1);--shade-800:hsla(281, 100%, 21%, 1);--shade-900:hsla(281, 100%, 16%, 1);--text-1-light:var(--shade-800);--text-2-light:var(--shade-900);--surface-1-light:var(--shade-300);--surface-2-light:var(--shade-200);--surface-3-light:var(--shade-100);--surface-4-light:var(--shade-600);--surface-5-light:var(--surface-4-light);--border-light:var(--shade-200);--bubble-size:350px;--bubble-1--color-1:hsl(191, 98%, 56%);--bubble-1--color-2:hsl(281, 100%, 56%);--bubble-2--color-1:hsl(338, 78%, 48%);--bubble-2--color-2:hsl(199, 98%, 48%);--lavender-blue-1:#e6e6ff;--lavender-blue-2:#ccc9ff;--lavender-blue-3:#b3b3ff;--lavender-blue-4:#9996ff;--lavender-blue-5:#bbb9fe;--text-color-1--light:var(--shade-900);--glass-tint--light:hsl(200deg 100% 96% / 67%);--header-bg-color--light:#d5d5ff;--logo-bg-color--light:var(--lavender-blue-1);--hr-color--light:var(--lavender-blue-2);--disclaimer-badge-border--light:hsl(53.88deg 100% 80.78%);--disclaimer-badge-bg--light:hsl(54deg 100% 73%);--disclaimer-badge-text--light:var(--text-color-1--light);--disclaimer-box-border-color--light:#bbdefb;--disclaimer-box-bg-color--light:hsl(205.38deg 86.67% 94.12%);--details-summary-border-color--light:hsl(146deg 87.42% 65.38%);--details-summary-bg-color--light:hsl(146deg 87.42% 80.38%);--details-summary-bg-color-active--light:hsl(146deg 87.42% 70.38%);--details-summary-font-color--light:#000;--tag-border-color--light:var(--lavender-blue-2);--tag-bg-color--light:#d5d5ff;--tag-bg-color-active--light:var(--lavender-blue-1);--tag-font-color--light:var(--text-color-1--light);--code-bg-color-inline--light:var(--lavender-blue-1);--kbd-border-color--light:var(--lavender-blue-3);--kbd-bg-color--light:var(--lavender-blue-1);--radio-container-badge-bg-color--light:var(--lavender-blue-2);--radio-container-border-color--light:var(--lavender-blue-2);--radio-container-bg-color--light:var(--lavender-blue-1);--post-card-border-color--light:var(--lavender-blue-2);--post-card-bg-color--light:#f0efff;--social-link-border-color--light:var(--lavender-blue-2);--social-link-bg-color--light:var(--tag-bg-color--light);--social-link-bg-color-active--light:var(--tag-bg-color-active--light);--toc-item-border-default-color--light:var(--lavender-blue-2);--toc-item-border-active-color--light:var(--surface-4);--toc-dropdown-border-color--light:var(--lavender-blue-5);--toc-dropdown-bg--light:var(--lavender-blue-1);--toc-dropdown-icon-color-filter-value--light:0;--dialog-bg-color--light:var(--lavender-blue-1);--dialog-border-color--light:var(--lavender-blue-4);--themes-border-color--light:var(--lavender-blue-2);--control-color--light:var(--lavender-blue-3);--control-interaction-color--light:var(--lavender-blue-2);--circle-border-color--light:var(--lavender-blue-4);--circle-bg-color--light:var(--lavender-blue-1);--circle-bg-color-checked--light:var(--lavender-blue-3);--circle-wave--light:#000;--checkbox-border-color--light:var(--lavender-blue-4);--checkbox-bg-color--light:var(--lavender-blue-1);--checkbox-bg-color-checked--light:var(--lavender-blue-2);--checkmark-color--light:var(--lavender-blue-1);--deep-purple-1:hsl(281, 56%, 10%);--deep-purple-2:hsl(281, 60%, 15%);--deep-purple-3:hsl(281, 60%, 20%);--deep-purple-4:hsl(281, 60%, 25%);--deep-purple-5:hsl(262, 86%, 8%);--text-color-1--dark:#fff;--glass-tint--dark:hsla(286, 86%, 6%, 0.657);--header-bg-color--dark:var(--deep-purple-2);--logo-bg-color--dark:var(--deep-purple-3);--hr-color--dark:var(--deep-purple-4);--disclaimer-badge-border--dark:hsl(53.88deg 100% 80.78%);--disclaimer-badge-bg--dark:hsl(54deg 100% 73%);--disclaimer-badge-text--dark:#000;--disclaimer-box-border-color--dark:#bbdefb;--disclaimer-box-bg-color--dark:hsl(205.38deg 64.06% 21.67%);--tag-border-color--dark:none;--tag-bg-color--dark:var(--deep-purple-3);--tag-bg-color-active--dark:var(--deep-purple-2);--tag-font-color--dark:var(--text-color-1--dark);--code-bg-color-inline--dark:var(--deep-purple-3);--kbd-border-color--dark:var(--deep-purple-4);--kbd-bg-color--dark:var(--deep-purple-3);--radio-container-badge-bg-color--dark:var(--deep-purple-2);--radio-container-border-color--dark:var(--deep-purple-1);--radio-container-bg-color--dark:var(--deep-purple-3);--post-card-border-color--dark:var(--deep-purple-4);--post-card-bg-color--dark:var(--deep-purple-1);--social-link-border-color--dark:var(--deep-purple-4);--social-link-bg-color--dark:var(--tag-bg-color--dark);--social-link-bg-color-active--dark:var(--tag-bg-color-active--dark);--toc-item-border-default-color--dark:var(--deep-purple-4);--toc-item-border-active-color--dark:var(--shade-50);--toc-dropdown-border-color--dark:var(--lavender-blue-5);--toc-dropdown-bg-color--dark:var(--deep-purple-5);--toc-dropdown-icon-color-filter-value--dark:1;--dialog-border-color--dark:var(--deep-purple-2);--dialog-bg-color--dark:var(--deep-purple-5);--themes-border-color--dark:var(--deep-purple-3);--circle-border-color--dark:#eedcf530;--circle-bg-color--dark:#2a1d5445;--circle-bg-color-checked--dark:var(--deep-purple-3);--circle-wave--dark:#fff;--control-color--dark:var(--deep-purple-3);--control-interaction-color--dark:var(--deep-purple-2);--checkbox-border-color--dark:var(--deep-purple-3);--checkbox-bg-color--dark:#402e7e45;--checkbox-bg-color-checked--dark:var(--deep-purple-3);--checkmark-color--dark:#fff;--text-1-dark:hsl(0, 0%, 90%);--text-2-dark:hsl(0, 0%, 95%);--border-dark:var(--shade-800)}:where(html),[theme-preference=light]{color-scheme:light;--surface-1:var(--surface-1-light);--surface-2:var(--surface-2-light);--surface-3:var(--surface-3-light);--surface-4:var(--surface-4-light);--surface-5:var(--surface-4-light);--text-color-1:var(--text-color-1--light);--header-bg-color:var(--header-bg-color--light);--logo-bg-color:var(--logo-bg-color--light);--glass-tint:var(--glass-tint--light);--hr-color:var(--hr-color--light);--disclaimer-badge-border:var(--disclaimer-badge-border--light);--disclaimer-badge-bg:var(--disclaimer-badge-bg--light);--disclaimer-badge-text:var(--disclaimer-badge-text--light);--disclaimer-box-border-color:var(--disclaimer-box-border-color--light);--disclaimer-box-bg-color:var(--disclaimer-box-bg-color--light);--details-summary-border-color:var(--details-summary-border-color--light);--details-summary-bg-color:var(--details-summary-bg-color--light);--details-summary-bg-color-active:var(--details-summary-bg-color-active--light);--details-summary-font-color:var(--details-summary-font-color--light);--tag-border-color:var(--tag-border-color--light);--tag-bg-color:var(--tag-bg-color--light);--tag-bg-color-active:var(--tag-bg-color-active--light);--tag-font-color:var(--tag-font-color--light);--code-bg-color-inline:var(--code-bg-color-inline--light);--kbd-border-color:var(--kbd-border-color--light);--kbd-bg-color:var(--kbd-bg-color--light);--radio-container-badge-bg-color:var(--radio-container-badge-bg-color--light);--radio-container-border-color:var(--radio-container-border-color--light);--radio-container-bg-color:var(--radio-container-bg-color--light);--post-card-border-color:var(--post-card-border-color--light);--post-card-bg-color:var(--post-card-bg-color--light);--social-link-border-color:var(--social-link-border-color--light);--social-link-bg-color:var(--social-link-bg-color--light);--social-link-bg-color-active:var(--social-link-bg-color-active--light);--toc-dropdown-border-color:var(--toc-dropdown-border-color--light);--toc-dropdown-bg-color:var(--toc-dropdown-bg--light);--toc-dropdown-icon-color-filter-value:var(--toc-dropdown-icon-color-filter-value--light)}:where(html) theme-switch,[theme-preference=light] theme-switch{--text-color-1:var(--purple-950);--text-color-2:var(--purple-900);--dialog-border-color:var(--dialog-border-color--light);--dialog-bg-color:var(--dialog-bg-color--light);--themes-border-color:var(--themes-border-color--light);--circle-border-color:var(--circle-border-color--light);--circle-bg-color:var(--circle-bg-color--light);--circle-bg-color-checked:var(--circle-bg-color-checked--light);--circle-wave:var(--circle-wave--light);--control-color:var(--control-color--light);--control-interaction-color:var(--control-interaction-color--light);--checkbox-border-color:var(--checkbox-border-color--light);--checkbox-bg-color:var(--checkbox-bg-color--light);--checkbox-bg-color-checked:var(--checkbox-bg-color-checked--light);--checkmark-color:var(--checkmark-color--light)}:where(html) toc-observer,[theme-preference=light] toc-observer{--toc-item-border-default-color:var(--toc-item-border-default-color--light);--toc-item-border-active-color:var(--toc-item-border-active-color--light)}@media (prefers-color-scheme:dark){:where(html){color-scheme:dark;--surface-1:var(--deep-purple-1);--surface-2:var(--deep-purple-2);--surface-3:var(--deep-purple-3);--surface-4:var(--deep-purple-4);--surface-5:var(--deep-purple-5);--text-color-1:#fff;--header-bg-color:var(--header-bg-color--dark);--logo-bg-color:var(--logo-bg-color--dark);--glass-tint:var(--glass-tint--dark);--hr-color:var(--hr-color--dark);--disclaimer-badge-bg:var(--disclaimer-badge-bg--dark);--disclaimer-badge-border:var(--disclaimer-badge-border--dark);--disclaimer-badge-text:var(--disclaimer-badge-text--dark);--disclaimer-box-border-color:var(--disclaimer-box-border-color--dark);--disclaimer-box-bg-color:var(--disclaimer-box-bg-color--dark);--tag-border-color:var(--tag-border-color--dark);--tag-bg-color:var(--tag-bg-color--dark);--tag-bg-color-active:var(--tag-bg-color-active--dark);--tag-font-color:var(--tag-font-color--dark);--code-bg-color-inline:var(--code-bg-color-inline--dark);--kbd-border-color:var(--kbd-border-color--dark);--kbd-bg-color:var(--kbd-bg-color--dark);--radio-container-badge-bg-color:var(--radio-container-badge-bg-color--dark);--radio-container-border-color:var(--radio-container-border-color--dark);--radio-container-bg-color:var(--radio-container-bg-color--dark);--post-card-border-color:var(--post-card-border-color--dark);--post-card-bg-color:var(--post-card-bg-color--dark);--social-link-border-color:var(--social-link-border-color--dark);--social-link-bg-color:var(--social-link-bg-color--dark);--social-link-bg-color-active:var(--social-link-bg-color-active--dark);--toc-dropdown-border-color:var(--toc-dropdown-border-color--dark);--toc-dropdown-bg-color:var(--toc-dropdown-bg-color--dark);--toc-dropdown-icon-color-filter-value:var(--toc-dropdown-icon-color-filter-value--dark)}:where(html) theme-switch{--text-color-1:#fff;--text-color-2:#fff;--dialog-border-color:var(--dialog-border-color--dark);--dialog-bg-color:var(--dialog-bg-color--dark);--themes-border-color:var(--themes-border-color--dark);--circle-border-color:var(--circle-border-color--dark);--circle-bg-color:var(--circle-bg-color--dark);--circle-bg-color-checked:var(--circle-bg-color-checked--dark);--circle-wave:var(--circle-wave--dark);--control-color:var(--control-color--dark);--control-interaction-color:var(--control-interaction-color--dark);--checkbox-border-color:var(--checkbox-border-color--dark);--checkbox-bg-color:var(--checkbox-bg-color--dark);--checkbox-bg-color-checked:var(--checkbox-bg-color-checked--dark);--checkmark-color:#fff}toc-observer{--toc-item-border-default-color:var(--toc-item-border-default-color--dark);--toc-item-border-active-color:var(--toc-item-border-active-color--dark)}.social-links img{filter:brightness(0) invert(1)}header.opaque .logo{border-color:var(--surface-4)}}[theme-preference=dark]{color-scheme:dark;--surface-1:var(--deep-purple-1);--surface-2:var(--deep-purple-2);--surface-3:var(--deep-purple-3);--surface-4:var(--deep-purple-4);--surface-5:var(--deep-purple-5);--text-color-1:#fff;--header-bg-color:var(--header-bg-color--dark);--logo-bg-color:var(--logo-bg-color--dark);--glass-tint:var(--glass-tint--dark);--hr-color:var(--hr-color--dark);--disclaimer-badge-bg:var(--disclaimer-badge-bg--dark);--disclaimer-badge-border:var(--disclaimer-badge-border--dark);--disclaimer-badge-text:var(--disclaimer-badge-text--dark);--disclaimer-box-border-color:var(--disclaimer-box-border-color--dark);--disclaimer-box-bg-color:var(--disclaimer-box-bg-color--dark);--tag-border-color:var(--tag-border-color--dark);--tag-bg-color:var(--tag-bg-color--dark);--tag-bg-color-active:var(--tag-bg-color-active--dark);--tag-font-color:var(--tag-font-color--dark);--code-bg-color-inline:var(--code-bg-color-inline--dark);--kbd-border-color:var(--kbd-border-color--dark);--kbd-bg-color:var(--kbd-bg-color--dark);--radio-container-badge-bg-color:var(--radio-container-badge-bg-color--dark);--radio-container-border-color:var(--radio-container-border-color--dark);--radio-container-bg-color:var(--radio-container-bg-color--dark);--post-card-border-color:var(--post-card-border-color--dark);--post-card-bg-color:var(--post-card-bg-color--dark);--social-link-border-color:var(--social-link-border-color--dark);--social-link-bg-color:var(--social-link-bg-color--dark);--social-link-bg-color-active:var(--social-link-bg-color-active--dark);--toc-dropdown-border-color:var(--toc-dropdown-border-color--dark);--toc-dropdown-bg-color:var(--toc-dropdown-bg-color--dark);--toc-dropdown-icon-color-filter-value:var(--toc-dropdown-icon-color-filter-value--dark)}[theme-preference=dark] theme-switch{--text-color-1:#fff;--text-color-2:#fff;--dialog-border-color:var(--dialog-border-color--dark);--dialog-bg-color:var(--dialog-bg-color--dark);--themes-border-color:var(--themes-border-color--dark);--circle-border-color:var(--circle-border-color--dark);--circle-bg-color:var(--circle-bg-color--dark);--circle-bg-color-checked:var(--circle-bg-color-checked--dark);--circle-wave:var(--circle-wave--dark);--control-color:var(--control-color--dark);--control-interaction-color:var(--control-interaction-color--dark);--checkbox-border-color:var(--checkbox-border-color--dark);--checkbox-bg-color:var(--checkbox-bg-color--dark);--checkbox-bg-color-checked:var(--checkbox-bg-color-checked--dark);--checkmark-color:#fff}[theme-preference=dark] toc-observer{--toc-item-border-default-color:var(--toc-item-border-default-color--dark);--toc-item-border-active-color:var(--toc-item-border-active-color--dark)}[theme-preference=dark] .social-links img{filter:brightness(0) invert(1)}[theme-preference=dark] header.opaque .logo{border-color:var(--surface-4)}.header-links{display:flex;align-items:center;gap:var(--base-gap)}.header-links>li{list-style-type:none}#dropdown__title{display:flex;align-items:center;gap:calc(var(--base-gap)/ 2);border-radius:var(--base-radius);border:2px solid hsla(281,53%,97%,.63);padding:calc(var(--base-gap)/ 4) calc(var(--base-gap)/ 2);background-color:transparent}#dropdown__title img{aspect-ratio:1;height:1.5rem;filter:brightness(0) invert(var(--toc-dropdown-icon-color-filter-value))}.dropdown{position:relative;display:flex;justify-content:center;align-items:center}.dropdown:focus-within .dropdown__toc,.dropdown:hover .dropdown__toc{opacity:1;transform:rotateX(0) translateX(0);visibility:visible}.dropdown .dropdown__toc{display:grid;position:absolute;top:calc(100% - .25rem);right:0;transform:rotateX(-90deg) translateX(0);transform-origin:top center;opacity:.3;transition:280ms all ease-out;border-radius:4px;border:1px solid var(--toc-dropdown-border-color);background-color:var(--toc-dropdown-bg-color);box-shadow:0 .15em .25em rgba(0,0,0,.25);margin-block-start:var(--base-gap);padding:calc(var(--base-gap)/ 2);min-width:20ch}.dropdown .dropdown__toc a{color:var(text-1);display:block;padding:.5em}[theme-preference=dark] .post-tag.lit span{background-image:url("/img/flame-white.svg")}:where(a[href],area,button,input,label[for],select,summary,textarea,[tabindex]:not([tabindex*="-"])){cursor:pointer;touch-action:manipulation}html{block-size:100%;-webkit-text-size-adjust:none}hr{background-color:var(--hr-color);height:1px;border:0}body{display:flex;flex-direction:column;color:var(--text-color-1);font-family:Inter,sans-serif}:where(p,a,h1,h2,h3,h4,h5,h6){color:var(--text-color-1);overflow-wrap:break-word}:where(button,input,a[href],summary):where(:not(:active)):focus-visible{outline-offset:5px;transition:outline-offset 145ms ease}@media (prefers-reduced-motion:no-preference){a{transition:all .1s ease-in-out}a[href]:active{transform:scale(.95)}}.tmpl-home{display:flex;flex-direction:column;height:100vh}.tmpl-home .main-wrapper{flex:1;padding:var(--base-gap)}.main-wrapper{z-index:1}.main-wrapper main{margin:0 auto;width:100%;max-width:var(--site-width)}.intro{line-height:1.5;max-width:470px}.intro h1{margin-block-start:0}.social-links{--social-link-size:64px;display:flex;flex-wrap:wrap;gap:var(--base-gap);margin-block-start:calc(var(--base-gap) * -2);padding:0;list-style:none}.social-links li{border:1px solid var(--social-link-border-color);border-radius:50%;width:var(--social-link-size);height:var(--social-link-size);background-color:var(--social-link-bg-color)}.social-links li:is(:hover,:focus){background-color:var(--social-link-bg-color-active)}.social-links li a{display:flex;border-radius:50%;height:100%;padding:calc(var(--base-gap)/ 2)}.social-links li a img{width:100%;height:auto}aside.toc{grid-area:toc;position:sticky;top:calc(var(--header-height) + var(--base-gap) * 2);max-height:200px}.dropdown{display:none}@media screen and (max-width:750px){#main-wrapper.post{grid-template-areas:"main";grid-template-columns:1fr}aside.toc{display:none}aside#toc-mobile{display:block}}@media screen and (max-width:1199px){.dropdown{display:flex}}pre[class*=language-]{max-width:100%}footer{display:flex;align-items:center;justify-content:space-between;gap:var(--base-gap);padding:var(--base-gap);z-index:1}footer ul{display:flex;list-style-type:none;gap:var(--base-gap)}@media screen and (max-width:500px){footer{flex-direction:column-reverse;text-align:center}footer ul{flex-direction:column}}.post-tags{display:inline-flex;flex-wrap:wrap;gap:calc(var(--base-gap)/ 2 + 4px);padding:0;margin:0;list-style-type:none}.post-tags>li{display:inherit;align-items:center;height:36px}.post-tag{gap:calc(var(--base-gap)/ 2)}.post-tag.lit span{background-image:url("/img/flame.svg");background-size:contain;background-repeat:no-repeat;height:100%;aspect-ratio:4/5}.post-tag{display:flex;align-items:center;height:100%;padding:calc(var(--base-gap)/ 2) calc(var(--base-gap) * .75);border-radius:var(--tag-border-radius);text-decoration:none;background-color:var(--tag-bg-color);border:1px solid var(--tag-border-color);color:var(--tag-font-color);transform-origin:center}.post-tag img{height:100%}a.postlist-link{font-weight:500;font-size:1.2rem}.post-tag:is(:hover,:focus){background-color:var(--tag-bg-color-active)}.post-tag:active{transform:scale(.95)}.single-tag{display:inline-flex;margin-block-end:var(--base-gap)}.all-tags{margin:var(--base-gap) 0!important}.posts{display:grid;gap:var(--base-gap);grid-template-columns:repeat(auto-fill,minmax(300px,1fr));margin-block-start:var(--base-gap);margin-block-end:var(--base-gap);max-width:1280px}.postlist-item{--shadow-strength:1px;box-shadow:0 3px 5px -2px hsla(var(--shadow-color)/.04),0 7px 14px -5px hsla(var(--shadow-color)/.06),0 0 0 var(--shadow-strength) var(--post-card-border-color),0 7px 14px -5px hsla(var(--shadow-color)/.1);display:flex;flex-direction:column;gap:var(--base-gap);border-radius:var(--base-radius);border:1px solid var(--post-card-border-color);padding:var(--base-gap);background-color:var(--post-card-bg-color)}.postlist-item:focus-within{--shadow-strength:2px}.postlist-item header{display:flex;flex-direction:column}.post-tags{margin-top:auto}.disclaimer{position:relative;display:inline-block;border-radius:calc(var(--base-radius) * 1.5);border:1px solid var(--disclaimer-box-border-color);margin-block-start:calc(var(--base-gap) * 2);margin-block-end:var(--base-gap);max-width:500px;width:100%;padding:var(--base-gap);background-color:var(--disclaimer-box-bg-color);line-height:1.5}.disclaimer span{position:absolute;top:-20px;padding:4px 8px;border-radius:8px;border:1px solid var(--disclaimer-badge-border);background:var(--disclaimer-badge-bg);color:var(--disclaimer-badge-text)}.disclaimer ul{margin-block-end:0;padding-inline-start:2.5rem}details{position:relative;max-width:500px;width:100%;margin-block-end:var(--base-gap)}details[open] summary{position:absolute}details[open] summary:before{content:"";transform:rotate(180deg)}details[open]>.details-content{border-radius:calc(var(--base-radius) * 1.5);border:1px solid var(--disclaimer-box-border-color)}details summary{display:inline-flex;align-items:center;list-style:none;border-radius:calc(var(--base-radius) * 1.5);border:1px solid var(--details-summary-border-color);margin-inline-start:1px;margin-block-start:1px;padding:calc(var(--base-gap)/ 2) var(--base-gap);color:var(--details-summary-font-color);background-color:var(--details-summary-bg-color)}details summary:before{content:"";height:var(--detail-summary-icon-size);width:var(--detail-summary-icon-size);background-image:url("/img/icons/expand_more_FILL0_wght400_GRAD0_opsz48.svg");background-size:var(--detail-summary-icon-size);background-repeat:no-repeat;transform-origin:center;transition:transform 225ms cubic-bezier(.4, 0, .2, 1)}details summary:is(:hover,:focus){background-color:var(--details-summary-bg-color-active)}details .details-content{padding-block-start:calc(var(--base-gap) * 2.5);padding-block-end:var(--base-gap);padding-inline:var(--base-gap);background-color:var(--disclaimer-box-bg-color)}details .details-content p:last-child{margin-block-end:0}.main-start{display:flex;flex-direction:column;gap:var(--base-gap);--filter-value:"1"}.main-start .intro h1{margin:var(--base-gap) 0;margin-block-start:0}.main-start h1{margin:0}.main-start .posts{margin:0}.main-start #read-more-link{display:flex;align-items:center;text-decoration:none;margin-inline-start:auto}.main-start #read-more-chevron{filter:invert(var(--filter-value), 1)}#me-wrapper{display:flex;gap:var(--base-gap);flex-wrap:wrap;padding:var(--base-gap) 0 calc(var(--base-gap) * 1.5);padding-block-end:0}.me{display:flex;flex-direction:column;align-items:center;margin:calc(var(--base-gap) * -1) auto 0}.profile-picture svg{width:100%;height:100%}.profile-picture img{max-width:100%}#menu-items{bottom:anchor(bottom);left:anchor(center);translate:-50% 0}body{line-height:1.5;-webkit-font-smoothing:antialiased}.post{max-width:fit-content}.main-wrapper{display:flex;flex-direction:column;gap:3rem;margin:0 auto;padding-inline:clamp(1.375rem,1.2rem + 0.89vw,2rem)}aside{display:none}kbd{padding:3px 5px;border-radius:6px;background-color:var(--kbd-bg-color);box-shadow:0 2px 0 1px var(--kbd-border-color)}.sample-img{height:auto;width:100%}@media screen and (min-width:1200px){body:not(.content-page) .main-wrapper{display:grid;grid-template-columns:var(--site-width) 250px;grid-template-areas:"main toc"}aside{display:block}}header{margin-bottom:calc(var(--base-gap) * 2);line-height:normal}h1{margin-block-start:0;font-size:clamp(1.5rem, 1.29rem + 1.07vw, 2.25rem)}h2{font-size:clamp(1.25rem, 1.11rem + .71vw, 1.75rem)}h3{font-size:clamp(1.125rem, 1.09rem + .18vw, 1.25rem)}:is(h2,h3):not([slot]){margin:revert;scroll-margin-top:calc(var(--header-height) + var(--base-gap))}p{line-height:1.9;font-size:clamp(1rem, .96rem + .18vw, 1.125rem)}aside{--top:calc(var(--header-height) + var(--base-gap) * 5);position:sticky;top:var(--top);height:fit-content}ul:not(.post-tags,.footer-links,.header-links){line-height:2;margin:var(--base-gap) 0;padding:revert}blockquote,p{margin-block-end:var(--base-gap)}.post :is(h2,h3,h4,h5,h6){margin-block-start:clamp(1.5rem,3vw,2rem)}figure{margin-block-end:var(--base-gap);width:fit-content}figcaption{text-align:center}table{border-collapse:collapse}table,td,th{border:1px solid var(--text-color-1);text-align:left;padding:calc(var(--base-gap)/ 2) var(--base-gap)}code{overflow-x:auto}code:not([class^=language-]){border-radius:calc(var(--base-radius)/ 2);padding:calc(var(--base-gap)/ 4) calc(var(--base-gap)/ 2);background-color:var(--code-bg-color-inline)}blockquote{font-style:italic;border-radius:var(--base-radius);border:2px solid var(--surface-3);padding:var(--base-gap)}#toc-nav{display:none;top:var(--header-height);position:fixed;right:0}#toc-opener:is(:focus,:hover)+#toc-nav{display:block}#skip-to-main-link{position:fixed;left:10px;top:var(--header-height);border-radius:var(--base-radius);padding:var(--base-gap);background-color:#d5d5ff;z-index:5}toc-observer ol{list-style-type:none;line-height:1;padding:0}toc-observer ol:not(:first-child){padding-inline:0.85em}toc-observer a{display:flex;border-left:2px solid var(--toc-item-border-default-color);padding:calc(var(--base-gap)/ 2) var(--base-gap);color:var(--text-color-1);transition:all 50ms ease-in-out;text-decoration:none}toc-observer a:is(:hover,:focus,.toc-active){border-left-color:var(--toc-item-border-active-color)}[theme-preference=dark] .dropdown__toc{border:1px solid var(--surface-4);background-color:var(--surface-5)}theme-switch{--base-gap:16px}theme-switch:not(:defined) [slot]{display:none}image-comparison{--shadow-color:220 3% 15%;--shadow-strength:1%;width:fit-content;height:fit-content;margin-block-end:var(--base-gap);line-height:1}image-comparison:not(:defined){background-color:rgba(0,0,0,.04);backdrop-filter:blur(20px);border-radius:calc(var(--base-radius) * 2);border:1px solid rgba(128,128,128,.28)}image-comparison:not(:defined) [slot]{display:none}image-comparison:not([variant=split]){box-shadow:0 -1px 3px 0 hsl(var(--shadow-color)/ calc(var(--shadow-strength) + 2%)),0 1px 2px -5px hsl(var(--shadow-color)/ calc(var(--shadow-strength) + 2%)),0 2px 5px -5px hsl(var(--shadow-color)/ calc(var(--shadow-strength) + 4%)),0 4px 12px -5px hsl(var(--shadow-color)/ calc(var(--shadow-strength) + 5%)),0 12px 15px -5px hsl(var(--shadow-color)/ calc(var(--shadow-strength) + 7%))}image-comparison [slot^=label]{margin:calc(var(--base-gap)/ 2);padding:calc(var(--base-gap)/ 4) calc(var(--base-gap)/ 2)}image-comparison[variant=split] [slot^=label]{display:flex;align-self:center}image-comparison [slot^=image]{max-inline-size:440px}image-comparison img{border-radius:calc(var(--base-gap));width:100%}image-comparison:not([variant=split]).post-img{display:flex;aspect-ratio:3/2;width:100%;max-width:440px}image-comparison#kasimir-overlay{aspect-ratio:4/3}.slider-set-wrapper{display:flex;gap:var(--base-gap);flex-wrap:wrap;margin-block:var(--base-gap)}.slider-set{display:inline-flex;gap:var(--base-gap);border-radius:var(--base-radius);border:1px solid var(--radio-container-border-color);padding:var(--base-gap);width:fit-content;background-color:var(--radio-container-bg-color)}.slider-set legend{border-radius:calc(var(--base-radius)/ 1.5);padding-inline:calc(var(--base-gap)/ 2);background-color:var(--radio-container-badge-bg-color)}:root{--color-bg:#2b2b2b;--color-color-primary:#f8f8f2;--color-color-secondary:#d4d0ab;--code-color-punctuation:#fefefe;--color-4:#ffa07a;--color-5:#00e0e0;--code-color-boolean:var(--color-5);--color-6:#abe338;--color-7:#ffd700}:is(code,pre):is([class*=language-]){color:var(--color-color-primary);background:0 0;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;tab-size:4;hyphens:none}pre[class*=language-]{padding:1em;margin-block-end:1em;border-radius:calc(var(--base-radius) * 2);max-width:100%;padding:var(--base-gap);max-width:100%;border-radius:8px;display:grid;grid-template-areas:"code";gap:var(--base-gap);align-items:center}:not(pre)>code[class*=language-],pre[class*=language-]{background:var(--color-bg)}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token:is(.comment,.prolog,.doctype,.cdata){color:var(--color-color-secondary)}.token.punctuation{color:var(--code-color-punctuation)}.token:is(.property,.tag,.constant,.symbol,.deleted){color:var(--color-4)}.token:is(.boolean,.number){color:var(--color-5)}.language-css .token.string,.style .token.string,.token:is(.entity,.keyword,.operator,.url,.variable){color:var(--color-5)}.token:is(.selector,.attr-name,.string,.char,.builtin,.inserted){color:var(--color-6)}.token:is(.atrule,.attr-value,.function,.regex,.important){color:var(--color-7)}.token:is(.important,.bold){font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token:is(.atrule,.attr-value,.function,.keyword,.operator,.selector){font-weight:700}.token:is(.attr-value,.comment,.doctype,.function,.keyword,.operator,.property,.string){color:highlight}.token:is(.attr-value,.url){font-weight:400}}@font-face{font-family:Inter;font-style:normal;font-weight:400;font-display:swap;src:url("/fonts/inter-v7-latin-regular.woff2") format("woff2");unicode-range:U+0000-00FF,U+02BB-02BC,U+02DA,U+02DC,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215}@font-face{font-family:Inter;font-style:normal;font-weight:500;font-display:swap;src:url("/fonts/inter-v7-latin-500.woff2") format("woff2");unicode-range:U+0000-00FF,U+02BB-02BC,U+02DA,U+02DC,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215}@font-face{font-family:Inter;font-style:normal;font-weight:700;font-display:swap;src:url("/fonts/inter-v7-latin-700.woff2") format("woff2");unicode-range:U+0000-00FF,U+02BB-02BC,U+02DA,U+02DC,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215}
    
  </style>


  <script>
  // Read theme preference from localStorage
  const themePreference = localStorage.getItem('theme-preference');
  // Set theme if one is present in localStorage
  if (themePreference !== null) {
    document
      .querySelector('html')
      .setAttribute('theme-preference', themePreference);
  }
</script>


  <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Tony Spegel">
  <link rel="alternate" href="/feed/feed.json" type="application/json" title="Tony Spegel">
  <link href="https://mastodon.social/@tonyspegel" rel="me">

  
  
    
    <script type="module" src="/js/theme-switch.js"></script>
  
    
    <script type="module" src="/js/index.js"></script>
  
    
    <script type="module" src="/js/post.js"></script>
  
    
    <script type="module" src="/js/image-comparison.js"></script>
  
  <link rel="icon" href="/favicon.svg">
</head>

  <body>
    
<theme-switch>
  <h2 slot="heading">Theme Auswahl</h2>
  <span slot="sub-heading">W√§hle ein Theme f√ºr die Website</span>
  <a href="datenschutzerklaerung/#auswertung-des-verhaltens-von-besucherinnen-und-besuchern-cookies"
    id="read-more"
    slot="read-more"
    target="_blank"
    title="Was wird gespeichert?"
  >
    ?
  </a>
  <span slot="close-caption">Schlie√üen</span>
</theme-switch>

    <header id="site-header">
  <nav aria-label="Hauptnavigation">
    
      <a class="logo" href="/" title="Zur Startseite">
        <img src="/tsp_icon.svg" alt="Tony Spegel Logo">
      </a>
    

    <ul class="header-links">
      
      <li class="dropdown">
        <button type="button"id="dropdown__title">
          Inhalt
          <img src="/img/icons/toc_FILL0_wght400_GRAD0_opsz48.svg" aria-hidden="true" >
        </button>

        <div class="dropdown__toc" id="drop-down-container">
          <toc-observer observeParent>
            <div slot="toc">
              <nav class="toc">
                <ol>
                    
                    <li><a href="#slider">Slider</a>
            
                <ol>
                    
                    <li><a href="#html-and-css">HTML & CSS</a>
            		</li>

                    <li><a href="#entwicklung-der-slider-funktion">Entwicklung der Slider-Funktion</a>
            		</li>

                    <li><a href="#barrierefreiheit-des-sliders">Barrierefreiheit des Sliders</a>
            		</li>

                    <li><a href="#housekeeping-mit-lifecycle-callbacks">Housekeeping üßΩ mit Lifecycle-Callbacks</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#overlay">Overlay</a>
            		</li>

                    <li><a href="#split">Split</a>
            		</li>

                    <li><a href="#custom-events">Custom Events</a>
            		</li>

                    <li><a href="#internationalisierung">Internationalisierung</a>
            		</li>

                    <li><a href="#drei-components-in-einer">Drei Components in einer</a>
            
                <ol>
                    
                    <li><a href="#warum-das-eigentlich-nicht-sinnvoll-ist">Warum das eigentlich nicht sinnvoll ist</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#integration-auf-websites-und-in-frameworks">Integration auf Websites und in Frameworks</a>
            		</li>

                    <li><a href="#fazit">Fazit</a>
            		</li>

                    <li><a href="#update-rtl-bugfix">Update: RTL Bugfix</a>
            		</li>
                </ol>
            </nav>
            </div>
          </toc-observer>
        </div>
      </li>
      
      <li>
        <button id="btn-theme-selection" title="Farbschema ausw√§hlen"></button>
      </li>
    </ul>
  </nav>
</header>

    <div class="glass"></div>
    <div class="bubble"></div>
    <div class="bubble-2"></div>
    <div class="main-wrapper post">
      <main>
        <div id="sentinel-element"></div>
        <header>
          <time class="article-date" datetime="2023-04-14">
            14. Apr. 2023
          </time>
          <h1>Image Comparison Component</h1>
          <ul class="post-tags">
            
              
              <li>
                
  
      <a href="/tags/lit/" class="post-tag lit">
        #Lit
        <span></span>
      </a>

    

              </li>
            
              
              <li>
                
  
      <a href="/tags/web-components/" class="post-tag">#Web Components</a>
  

              </li>
            
              
              <li>
                
  
      <a href="/tags/a11y/" class="post-tag">#a11y</a>
  

              </li>
            
              
              <li>
                
  
      <a href="/tags/typescript/" class="post-tag">#TypeScript</a>
  

              </li>
            
          </ul>
        </header>

        <p>In diesem Post geht es darum, eine Component zu entwickeln, welche es erm√∂glicht, Bilder auf verschiedene Arten zu vergleichen. Bilder k√∂nnen mit einem Slider, einem Overlay oder in einer Split-Ansicht verglichen werden.</p>
<image-comparison variant="slider" sliderPrompt="Slider bewegen, um zu vergleichen" overlayPrompt="Tippen und gedr√ºckt halten, um zu vergleichen" class="post-img" id="image-comparison-demo">
  <label slot="label-before">Ohne Filter</label>
  <label slot="label-after">Graustufen</label>
  <img slot="image-before" src="/img/2023/image-comparison/2022_1004_14254000-w3120--opt.jpg" width="440" alt="Blumen in Paris" >
  <img slot="image-after" src="/img/2023/image-comparison/2022_1004_14254000-w3120_grayscale--opt.jpg" width="440" alt="Blumen in Paris dargestellt in Graustufen" >
</image-comparison>
<div class="slider-set-wrapper">
  <fieldset id="slider-variant-set" class="slider-set">
    <legend>Variante</legend>
    <div>
      <input type="radio" id="slider-variant" name="variant" value="slider" checked>
      <label for="slider-variant">Slider</label>
    </div>
    <div>
      <input type="radio" id="overlay-variant" name="variant" value="overlay">
      <label for="overlay-variant">Overlay</label>
    </div>
    <div>
      <input type="radio" id="split-variant" name="variant" value="split">
      <label for="split-variant">Split</label>
    </div>
  </fieldset>
  
</div>
<p><code>&lt;image-comparison&gt;</code> unterst√ºtzt neben diesen Varianten diverse Tastaturk√ºrzel, verschiedene Leserichtungen, Custom Events und ist durch Slots, Attribute und CSS Custom Properties konfigurierbar. Im Folgenden gehe ich auf diese Aspekte ein und beginne mit dem Slider.</p>
<p>Ist es sinnvoll, mehrere Components in einer zu vereinen? tl;dr: <a href="#warum-das-eigentlich-nicht-sinnvoll-ist">In diesem Fall eigentlich nicht</a>.</p>
<p><a href="https://github.com/TonySpegel/image-comparison" target="_blank" rel="noopener noreferrer">GitHub</a>, <a href="https://npmjs.com/package/image-comparison-component" target="_blank" rel="noopener noreferrer">NPM</a>, <a href="https://lit.dev/playground/#gist=2b393dfba73ce32f7b3426492142b926" target="_blank" rel="noopener noreferrer">Lit Playground</a></p>
<hr>
<div class="disclaimer">
  <span>Hinweis</span>
  <p>
    Dieser Post geht davon aus, dass ihr euch schon ein wenig mit Web Components besch√§ftigt habt - wenn nicht, ist das aber auch in Ordnung.
    Hier ein paar Links:
  </p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components" target="_blank" rel="noopener noreferrer">MDN Web Docs: Web Components</a></li>
<li><a href="https://lit.dev/docs/" target="_blank" rel="noopener noreferrer">lit.dev: What is Lit?</a></li>
<li><a href="https://web.dev/learn/html/template/" target="_blank" rel="noopener noreferrer">Learn HTML!: Template, slot, and shadow</a></li>
</ul>
</div>
<section>
<h2 id="slider"><a class="header-anchor" href="#slider">Slider</a></h2>
<p>Die Slider-Variante ist die komplexeste der drei Varianten. Komplex vor allem durch die vielseitigen Interaktions- und Konfigurationsm√∂glichkeiten aber weniger durch das CSS.</p>
<section>
<h3 id="html-and-css"><a class="header-anchor" href="#html-and-css">HTML &amp; CSS</a></h3>
<p>Wenn man die Component nutzen m√∂chte, gilt folgendes HTML. Die Label sind zwar optional aber zumindest die <code>alt</code>-Attribute der Bilder sollten gesetzt werden:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image-comparison</span>
  <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>slider<span class="token punctuation">"</span></span>
  <span class="token attr-name">sliderPrompt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Move the slider to compare<span class="token punctuation">"</span></span>
  <span class="token attr-name">overlayPrompt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Tap and hold to compare<span class="token punctuation">"</span></span>
<span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label-before<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Ohne Filter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label-after<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Graustufen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image-before<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/2023/before.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Rote Zierquitte<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image-after<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/2023/after.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Rote Zierquitte (Graustufen)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image-comparison</span><span class="token punctuation">></span></span></code></pre>
<p>Auff√§llig sind hierbei vor allem die drei gesetzten Attribute sowie die zwei Label und Bildelemente. Die <code>variant</code> bestimmt sowohl das Verhalten als auch das Aussehen der Component, die beiden Prompt-Attribute geben kurze Hinweise zur Interaktion. Die sogenannten <code>slot</code>-Attribute sind eine Eigenheit der Web Components und k√∂nnen als eine Art Schnittstelle gesehen werden. In dieser Component werden sie genutzt, um die zu vergleichenden Bilder sowie deren Label anzuzeigen. Intern folgt das HTML diesem vereinfachten Schema:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label-before<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label-after<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container-before<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image-before<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container-after<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">inset</span><span class="token punctuation">(</span>0 50% 0 0<span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image-after<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">left</span><span class="token punctuation">:</span> 50%</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>Neben zus√§tzlichem Markup, wie dem Button, steckt der gr√∂√üte Teil der <span aria-hidden="true">‚ú®</span>Magie<span aria-hidden="true">‚ú®</span> in der <code>clip-path: inset(0 50% 0 0)</code>-Anweisung des zweiten Containers. Der umliegende Container an sich ist schnell erkl√§rt:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">#image-container</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-areas</span><span class="token punctuation">:</span> <span class="token string">"images"</span><span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Ich setze hier vor allem deswegen auf ein Grid-Layout, damit ich die verschiedenen Elemente einfach √ºbereinander stapeln kann. Dazu nutze ich <code>grid-template-areas: &quot;images&quot;</code> um mich in den √ºbrigen Elementen auf dieses beziehen zu k√∂nnen. <code>overflow: hidden</code> wird dann gesetzt, um den dann √ºberstehenden Divider des Buttons abzuschneiden.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">#container-before, #container-after</span> <span class="token punctuation">{</span>
  <span class="token property">grid-area</span><span class="token punctuation">:</span> images<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">button</span> <span class="token punctuation">{</span>
  <span class="token property">grid-area</span><span class="token punctuation">:</span> images<span class="token punctuation">;</span>
  <span class="token property">align-self</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>

  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-border-width<span class="token punctuation">)</span> solid <span class="token function">var</span><span class="token punctuation">(</span>--slider-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">aspect-ratio</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token property">cursor</span><span class="token punctuation">:</span> col-resize<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">button:before, button:after</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--thumb-bar-width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--thumb-bar-width<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--slider-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">button:before</span> <span class="token punctuation">{</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% + <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span> - <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--thumb-border-width<span class="token punctuation">)</span> / 2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">button:after</span> <span class="token punctuation">{</span>
  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--thumb-size<span class="token punctuation">)</span> - <span class="token function">var</span><span class="token punctuation">(</span>--thumb-border-width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Wie am Anfang beschrieben, werden nun beide Container sowie der Button mit <code>grid-area: images</code> √ºbereinander gestapelt. Die Reihenfolge im Markup entscheidet dann dar√ºber, welches Element ganz oben liegt - hier ist es der Button. Dieser wird dann mit <code>align-self: center</code> vertikal zentriert und horizontal um die H√§lfte der eigenen Breite verschoben. Um dann schlie√ülich den Divider des Sliders zu erzeugen, positioniere ich einfach die Pseudo-Elemente <code>:before</code> und <code>:after</code> ober- und unterhalb des Buttons und nutze daf√ºr einige CSS Variablen. Auf diese Weise habe ich zwar einige Variablen aber das macht es f√ºr mich nachvollziehbarer und einfacher zu rechnen, was wie platziert wird.<br>
Au√üerdem ist es so f√ºr Dritte ebenso leichter weil klar ist, was angepasst werden kann. Das war es auf der CSS Seite des Sliders. Eine Demo zu diesem Stand k√∂nnt ihr auf <a href="https://codepen.io/TonySpegel/pen/oNabodW?editors=1100" target="_blank" rel="noopener noreferrer">Codepen</a> betrachten.</p>
</section>
<section>
<h3 id="entwicklung-der-slider-funktion"><a class="header-anchor" href="#entwicklung-der-slider-funktion">Entwicklung der Slider-Funktion</a></h3>
<p>Die wichtigste Information, welche der Slider ben√∂tigt, ist die Position des Dividers.</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">ImageComparison</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> Number<span class="token punctuation">,</span> reflect<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> sliderPosition<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Lit nutzt an vielen Stellen so genannte Decorators, ein Pattern welches es einem erm√∂glicht, verschiedene Konstrukte mit zus√§tzlicher Funktionalit√§t zu erweitern. Dazu ein Zitat aus der offiziellen <a href="https://lit.dev/docs/components/properties/" target="_blank" rel="noopener noreferrer">Dokumentation</a>:</p>
<blockquote cite="https://lit.dev/docs/components/properties/">
"Lit components receive input and store their state as JavaScript class fields or properties. Reactive properties are properties that can trigger the reactive update cycle when changed, re-rendering the component, and optionally be read or written to attributes."
</blockquote>
<p>In diesem Decorator werden zwei <a href="https://lit.dev/docs/components/properties/#property-options" target="_blank" rel="noopener noreferrer">Optionen</a> genutzt. Zum einen <code>type</code>, diese gibt an auf welche Art ein Attribut intern konvertiert werden soll. Zum anderen sorgt <code>reflect</code> daf√ºr, dass der interne Wert auch wieder nach au√üen an das Attribut gegeben wird. Vereinfacht ausgedr√ºckt, erm√∂glicht das eine Synchronisation des √§u√üeren wie inneren Zustands.</p>
<pre class="language-ts"><code class="language-ts"><span class="token operator">&lt;</span>image<span class="token operator">-</span>comparison sliderposition<span class="token operator">=</span><span class="token string">"50"</span> variant<span class="token operator">=</span><span class="token string">"slider"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">-</span>comparison<span class="token operator">></span>
<span class="token comment">// ‚Üì‚Üë</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> Number<span class="token punctuation">,</span> reflect<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> sliderPosition<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span></code></pre>
<p>Jetzt zur eigentlichen Funktionalit√§t, welche diesen Wert setzen wird. Lit setzt grunds√§tzlich auf einen deklarativen Ansatz, um dessen Templates zu beschreiben. Statt Schritt f√ºr Schritt anzugeben, wie sich ein Template ver√§ndert, gibt man in deklarativen Ans√§tzen vor, wie ein Template in dessen finalen Zustand auszusehen hat. Das bedeutet nicht, dass man nicht beide Ans√§tzen mischen kann.</p>
<p>Dazu folgt der grunds√§tzliche weitere Aufbau des Templates. Alles was im Template anzuzeigen ist, wird in der <code>render()</code>-Methode aufgerufen:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ImageComparison</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> Number<span class="token punctuation">,</span> reflect<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> sliderPosition<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">state</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> isRtl<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div id="image-container">
        &lt;slot name="label-before">&lt;/slot>
        &lt;slot name="label-after">&lt;/slot>

        &lt;div id="container-before">
          &lt;slot name="image-before">&lt;/slot>
        &lt;/div>

        &lt;div
          id="container-after"
          style=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>isRtl
            <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">clip-path: inset(0 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>sliderPosition<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">% 0 0)</span><span class="token template-punctuation string">`</span></span>
            <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">clip-path: inset(0 0 0 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>sliderPosition<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%)</span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        >
          &lt;slot name="image-after">&lt;/slot>
        &lt;/div>

        &lt;button
          @mousedown=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setSlidingState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
          @mousemove=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>e<span class="token operator">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slideCompareHandler</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
          style="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">left: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>isRtl <span class="token operator">?</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>sliderPosition <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sliderPosition
          <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"
        >
        &lt;/button>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Hier nutze ich zwei neue Konzepte im Lit Kontext: die <a href="https://lit.dev/docs/components/events/#adding-event-listeners-in-the-element-template" target="_blank" rel="noopener noreferrer">@-Syntax</a> definiert JavaScript-typische EventListener, der <code>@state()</code>-Decorator einen ausschlie√ülich internen Zustand. Inbesondere <code>isRtl</code> wird sp√§ter wichtig sein, um eine so genannte <abbr>RTL</abbr> (Right-to-left) script Unterst√ºtzung, also Sprachen welche von Rechts nach Links gelesen werden, zu bieten. Hier hat das den einfachen Hintergrund, dass ich das Vorzeichen im <code>left</code>-Attribut √§ndern oder im <code>inset()</code> das Rechteck von der anderen Seite aus aufziehen kann.</p>
<p>Jetzt zu den eigentlichen Methoden, ich gehe dabei nur auf die wirklich wichtigen und etwas komplizierteren ein:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">private</span> slideCompareHandler <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> MouseEvent <span class="token operator">|</span> TouchEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slideCompare</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Converts 'cursor' position and updates the UI accordingly
 */</span>
<span class="token keyword">private</span> slideCompare <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> MouseEvent <span class="token operator">|</span> TouchEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>slidingActive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">convertCursorToSliderPosition</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isRtl <span class="token operator">?</span> <span class="token number">100</span> <span class="token operator">-</span> pos <span class="token operator">:</span> pos<span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>sliderPosition <span class="token operator">=</span> pos<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Wenn <code>slidingActive</code> wahr ist, wird die Cursor-Position relativ zur Container-Position konvertiert und abh√§ngig von der Leserichtung gesetzt.<br>
√úbrigens sieht man hier auch gut, dass nicht alles deklarativ sein kann und interne Werte nat√ºrlich auch imperativ gesetzt werden.</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> clamp <span class="token operator">=</span> <span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> min<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=></span>
  Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> min<span class="token punctuation">)</span><span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * The relative position of a cursor (as in: a touch or mouse device)
 * is converted into a clamped slider position value
 */</span>
<span class="token function">convertCursorToSliderPosition</span><span class="token punctuation">(</span>event<span class="token operator">:</span> TouchEvent <span class="token operator">|</span> MouseEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> left<span class="token punctuation">,</span> width <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imageContainer<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> scrollX <span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">;</span>

  <span class="token keyword">const</span> pageX <span class="token operator">=</span> event <span class="token keyword">instanceof</span> <span class="token class-name">MouseEvent</span> <span class="token operator">?</span>
    event<span class="token punctuation">.</span>pageX <span class="token operator">:</span>
    event<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>

  <span class="token keyword">const</span> xOffset <span class="token operator">=</span> left <span class="token operator">+</span> scrollX<span class="token punctuation">;</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> pageX <span class="token operator">-</span> xOffset<span class="token punctuation">;</span>

  <span class="token keyword">const</span> sliderPostion <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>
    <span class="token function">clamp</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">/</span> width<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> sliderPostion<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Abh√§ngig davon ob es sich beim ausgef√ºhrten Event um ein <code>Touch</code>- oder <code>Mouse</code>-Event handelt, stehen unterschiedliche Properties zur Verf√ºgung. In beiden F√§llen wird jedoch <code>getBoundingClientRect()</code> genutzt, um die Position und Breite des Containers zu ermitteln. Mit Hilfe dieser wird in Abh√§ngigkeit dann bestimmt, wo sich das Eingabeger√§t relativ zu diesem befindet, um am Ende diesen Wert in eine Zahl zwischen 0 und 100 zu konvertieren. Ich gebe zu, dass das etwas kompliziert und nicht einfach zu verstehen ist - aber damit werden diverse Eventualit√§ten abgedeckt die sonst zu einem Fehlverhalten f√ºhren w√ºrden.</p>
<p>Im Grunde genommen ist, dass die Funktionalit√§t die notwendig ist, um den Slider zu bewegen und Bilder vergleichen zu k√∂nnen. Das allein ist aber noch nicht ausreichend. Zum einen muss noch der Barrierefreiheit wegen (unter anderem) eine Tastatur Unterst√ºtzung und zum anderen etwas was ich Housekeeping nenne, implementiert werden.</p>
</section>
<section>
<h3 id="barrierefreiheit-des-sliders"><a class="header-anchor" href="#barrierefreiheit-des-sliders">Barrierefreiheit des Sliders</a></h3>
<p>Zur Barrierefreiheit des Sliders z√§hle ich, dass dieser nicht nur mit einer Maus, sondern m√∂glichst mit beliebigen Eingabeger√§ten genutzt werden kann und auch seinen internen Zustand nach au√üen an Screenreader zu kommunizieren wei√ü. Wenn es darum geht, m√∂glichst barrierefreie L√∂sungen zu entwickeln, ist die <a href="https://www.w3.org/WAI/ARIA/apg/patterns/" target="_blank" rel="noopener noreferrer">Patterns</a> Seite des W3C ein optimaler Einstieg. Diese bietet diverse, immer wiederkehrende, Patterns wie beispielsweise Tabs, Slide Shows und √§hnliches an und geht dabei auf deren Besonderheiten ein. Das <a href="https://www.w3.org/WAI/ARIA/apg/patterns/windowsplitter/" target="_blank" rel="noopener noreferrer">Window Splitter</a> Pattern passt hierbei am ehesten zur Slider-Variante.<br>
Um Tastatureingaben abzufangen, extrahiere ich aus dem <code>KeyboardEvent</code> zum einen die gedr√ºckten Tasten, zu denen vor allem die Cursortasten z√§hlen sowie <code>ctrlKey</code>, <code>metaKey</code> (<kbd>Win</kbd> / <kbd>‚åò</kbd>) und <code>shiftKey</code>, um diese in Kombination mit den Cursortasten zu nutzen.</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">/**
 * Applied when shift is pressed with an arrow key (variant 'slider')
 */</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> Number <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> sliderSteps<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Handle arrow, home &amp; end keys and use more steps when shift is pressed
 */</span>
<span class="token keyword">private</span> keyboardSliderHandler <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> KeyboardEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> ctrlKey<span class="token punctuation">,</span> key<span class="token punctuation">,</span> metaKey<span class="token punctuation">,</span> shiftKey<span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> isRtl <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> isLtr <span class="token operator">=</span> <span class="token operator">!</span>isRtl<span class="token punctuation">;</span>
  <span class="token keyword">const</span> steps <span class="token operator">=</span> shiftKey <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sliderSteps <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> position <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sliderPosition<span class="token punctuation">;</span>

  <span class="token comment">// These keys would scroll the page when pressed</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">===</span> <span class="token string">'Space'</span> <span class="token operator">||</span> key <span class="token operator">===</span> <span class="token string">'Home'</span> <span class="token operator">||</span> key <span class="token operator">===</span> <span class="token string">'End'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'ArrowLeft'</span> <span class="token operator">&amp;&amp;</span> isLtr<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'ArrowRight'</span> <span class="token operator">&amp;&amp;</span> isRtl<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ‚Üê Firefox would highlight parts of the UI and labels w/o it</span>
    position <span class="token operator">-=</span> steps<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'ArrowRight'</span> <span class="token operator">&amp;&amp;</span> isLtr<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'ArrowLeft'</span> <span class="token operator">&amp;&amp;</span> isRtl<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// same as above regarding Firefox</span>
    position <span class="token operator">+=</span> steps<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Also often called 'Pos1' or '‚åò + ‚Üê' on MacOS</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'Home'</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>metaKey <span class="token operator">||</span> ctrlKey<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">===</span> <span class="token string">'ArrowLeft'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// End or '‚åò + ‚Üí' on MacOS</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'End'</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>metaKey <span class="token operator">||</span> ctrlKey<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">===</span> <span class="token string">'ArrowRight'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    position <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Center thumb position</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'Enter'</span><span class="token punctuation">)</span> position <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>sliderPosition <span class="token operator">=</span> <span class="token function">clamp</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Eine weitere M√∂glichkeit den Slider zu bedienen, ist die direkte Eingabe, in dem man auf die gew√ºnschte Position tippt. Das kann Menschen helfen, welche motorisch nicht dauerhaft etwas gedr√ºckt halten und ziehen k√∂nnen und f√ºhlt sich meiner Meinung nach auch intuitiver an. Damit man ohne st√∂rendes Verhalten Bilder weiter √ºber das Kontextmen√º speichern kann, habe ich die Aktion auf die (in der Regel) linke und mittlere Maustaste beschr√§nkt. Au√üerdem l√§sst sich der Slider durch doppeltes klicken/tippen zentrieren.</p>
<pre class="language-ts"><code class="language-ts">html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  &lt;div
    @mousedown=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>e<span class="token operator">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> button <span class="token punctuation">}</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
      <span class="token comment">// The left or the wheel/middle button</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        button <span class="token operator">===</span> MouseActions<span class="token punctuation">.</span>Main <span class="token operator">||</span>
        button <span class="token operator">===</span> MouseActions<span class="token punctuation">.</span>Auxiliary
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setSlidingState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slideCompareHandler</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    id="image-container"
  >
    &lt;button @dblclick=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sliderPosition <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">>&lt;/button>
  &lt;/div>
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre>
<p>Jetzt bleibt noch die Kommunikation mit Screenreadern √ºbrig, um hier eine gute Integration zu erm√∂glichen, nutze ich ich diverse <a href="https://www.w3.org/WAI/ARIA/apg/patterns/windowsplitter/#:~:text=the%20arrow%20keys.-,WAI%2DARIA%20Roles%2C%20States%2C%20and%20Properties,-The%20element%20that" target="_blank" rel="noopener noreferrer">WAI-ARIA Roles</a> wie aus dem W3C Pattern zu entnehmen ist. Diese kommunizieren vor allem die minimale, maximale und aktuellen Position des Sliders.</p>
</section>
<section>
<h3 id="housekeeping-mit-lifecycle-callbacks"><a class="header-anchor" href="#housekeeping-mit-lifecycle-callbacks">Housekeeping üßΩ mit Lifecycle-Callbacks</a></h3>
<p>Im einem vorherigen Abschnitt bin ich darauf eingegangen, dass die <a href="https://lit.dev/docs/components/events/#adding-event-listeners-in-the-element-template" target="_blank" rel="noopener noreferrer">@-Syntax</a> es erm√∂glicht, EventListener hinzuzuf√ºgen. EventListener werden √ºblicherweise entfernt, wenn eine Component aus dem DOM entfernt wird. Das gilt aber nur f√ºr solche Events, die direkt an ein Element gebunden sind, also beispielsweise ein Click-Event an einem Button. Globale EventListener, also solche, die die Tastatur oder Mauseingaben verarbeiten und auch au√üerhalb einer Component verf√ºgbar sein m√ºssen, sind davon ausgenommen.</p>
<p>Das ist an sich aber nicht weiter tragisch, denn Web Components unterst√ºtzen so genannte Lifecycles. Das sind Callbacks die zu unterschiedlichen Zeitpunkten ausgel√∂st werden so dass hier genau solche Arbeiten durchgef√ºhrt werden k√∂nnen. <code>connectedCallback</code> ist hierbei genau der richtige Zeitpunkt, denn die Component wurde zum DOM hinzugef√ºgt.</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">/**
 * Component is added to the document's DOM,
 * add EventListeners for variant 'slider'.
 */</span>
override <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addSliderEventListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Slider EventListener are added when 'variant' is set to 'slider'
 */</span>
<span class="token keyword">private</span> <span class="token function">addSliderEventListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>variant <span class="token operator">===</span> <span class="token string">'slider'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Moving the slider</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>slideCompareHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>slideCompareHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Stop moving the slider</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>slideEndHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchend'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>slideEndHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>√Ñquivalent dazu m√ºssen die EventListener dann sp√§testens entfernt werden, wenn die Component nicht mehr im DOM ist:</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">/**
 * Clean up EventListeners
 */</span>
override <span class="token function">disconnectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">disconnectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeSliderEventListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Da meine Component mehrere Varianten √ºber das dazu passende Attribut unterst√ºtzt, muss auch das bedacht werden:</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">/**
 * Because slider EventListeners are only added when the
 * 'variant' attribute is set to 'slider', you also have to react to its changes
 */</span>
override <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'variant'</span><span class="token punctuation">,</span>
  oldVal<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  newVal<span class="token operator">:</span> Variants
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'variant'</span> <span class="token operator">&amp;&amp;</span> newVal <span class="token operator">!==</span> oldVal <span class="token operator">&amp;&amp;</span> newVal <span class="token operator">===</span> <span class="token string">'slider'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addSliderEventListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'variant'</span> <span class="token operator">&amp;&amp;</span> newVal <span class="token operator">!==</span> oldVal <span class="token operator">&amp;&amp;</span> newVal <span class="token operator">===</span> <span class="token string">'overlay'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeSliderEventListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Damit stelle ich sicher, dass EventListener nur dann hinzugef√ºgt bzw. entfernt werden, wenn es auch wirklich notwendig ist.</p>
</section>
</section>
<section>
<h2 id="overlay"><a class="header-anchor" href="#overlay">Overlay</a></h2>
<p>Die Overlay Variante ist deutlich kompakter und arbeitet im Grunde genommen aber auch hier wieder mit einem praktischen Trick, den ich mir durch das Stapeln des Grid-Layouts zu nutzen mache.</p>
<image-comparison variant="overlay" overlayPrompt="Tippen und gedr√ºckt halten, um zu vergleichen" id="kasimir-overlay" class="post-img">
  <label slot="label-before">Ohne Filter</label>
  <label slot="label-after">Graustufen</label>
  <img slot="image-before" src="/img/2023/image-comparison/kasimir--opt.jpg" width="440" alt="Tabby Katze" >
  <img slot="image-after" src="/img/2023/image-comparison/kasimir_filter--opt.jpg" width="440" alt="Tabby Katze in Graustufen" >
</image-comparison>
<p>Immer dann, wenn mit einem Eingabeger√§t auf das Bild gedr√ºckt und gehalten wird, √§ndere ich lediglich die Reihenfolge der Bilder im Stack und mehr nicht. Im CSS sieht das dann so aus:</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* Switch order of images */</span>
<span class="token selector">#image-container.pressed ::slotted([slot='image-after'])</span> <span class="token punctuation">{</span>
  <span class="token property">order</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>ausgel√∂st wird das durch folgenden Code:</p>
<pre class="language-ts"><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">state</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> pressed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> overlayTemplate <span class="token operator">=</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  &lt;div
    @keydown=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>keyboardOverlayHandler<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    @keyup=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setPressed</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    @mousedown=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setPressed</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    @mouseup=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setPressed</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    @mouseleave=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setPressed</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    tabindex="0"
    title=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>overlayPrompt<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    id="image-container"
    class="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>pressed <span class="token operator">?</span> <span class="token string">'pressed'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"
  >
    &lt;slot name="label-before">&lt;/slot>
    &lt;slot name="label-after">&lt;/slot>
    &lt;slot name="image-after">&lt;/slot>
    &lt;slot name="image-before">&lt;/slot>
  &lt;/div>
  &lt;slot name="prompt">&lt;/slot>
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre>
<p>Also wird nur eine einzige interne Variable geflippt.</p>
</section>
<section>
<h2 id="split"><a class="header-anchor" href="#split">Split</a></h2>
<image-comparison variant="split" class="post-img">
  <label slot="label-before">Ohne Filter</label>
  <label slot="label-after">Graustufen</label>
  <img slot="image-before" src="/img/2023/image-comparison/kasimir--opt.jpg" width="212" alt="Tabby Katze" >
  <img slot="image-after" src="/img/2023/image-comparison/kasimir_filter--opt.jpg" width="212" alt="Tabby Katze in Graustufen" >
</image-comparison>
<p>Es wird immer weniger komplex je weiter dieser Artikel fortschreitet, denn die Split-Variante ist tats√§chlich ausschlie√ülich CSS. Nicht besonders spannend, es ist einfach ein umbrechendes zweispaltiges Layout:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">:host([variant='split']) #image-container</span> <span class="token punctuation">{</span>
  <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--split-gap<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span>
    auto-fit<span class="token punctuation">,</span>
    <span class="token function">minmax</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--split-column-min-width<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">var</span><span class="token punctuation">(</span>--split-column-max-width<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">:host([variant='split']) .container-split-column</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">:host([variant='split']) ::slotted([slot^='label-'])</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</section>
<section>
<h2 id="custom-events"><a class="header-anchor" href="#custom-events">Custom Events</a></h2>
<p>Custom Events oder auch &quot;Synthetic Events&quot; sind wie der Name vermuten l√§sst eigens geschaffene Events. Da der Aufbau immer √§hnlich ist, gehe ich hier nur auf das Event des Sliders ein:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DragEvent</span> <span class="token keyword">extends</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">readonly</span> eventName <span class="token operator">=</span> <span class="token string">'drag-event'</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

  targetElement<span class="token operator">:</span> HTMLElement<span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>targetElement<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>DragEvent<span class="token punctuation">.</span>eventName<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      bubbles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      cancelable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      composed<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>targetElement <span class="token operator">=</span> targetElement<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Dieses l√∂se ich immer dann aus, wenn der Slider nicht mehr bewegt wird:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">private</span> slideEndHandler <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setSlidingState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DragEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Abfangen k√∂nnte man dieses Event wie √ºblich so:</p>
<pre class="language-js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'drag-event'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>In Class field <code>targetElement</code> steckt dann auch das bekannte <code>sliderPosition</code>-Attribut und dessen Wert.</p>
</section>
<section>
<h2 id="internationalisierung"><a class="header-anchor" href="#internationalisierung">Internationalisierung</a></h2>
<p>An manchen Stellen habe ich bereits angeschnitten, dass die Component auch Sprachen unterst√ºtzt, welche von rechts nach links gelesen werden. Meistens ist das auch kein Problem, denn Layouts wie <code>Grid</code> oder <code>Flex</code> unterst√ºtzen diese bereits von Haus aus so dass kein weiterer Code n√∂tig ist. Leider gibt es noch nicht in allen Browsern die CSS Pseudo Klasse <code>:dir()</code> so dass dann doch an einigen Stellen auf JavaScript zur√ºckgegriffen werden muss. In HTML bestimmt das <code>dir</code>-Attribut die Leserichtung eines Elements und wirkt sich auf alle Kind-Elemente aus.<br>
Normalerweise k√∂nnte man mit <code>closest()</code> ohne weiteres ausgehend von einem Element bis zum <code>Document</code> suchen bis man ein Element mit dem entsprechenden Attribut gefunden hat - im ShadowDOM ist das allerdings etwas komplizierter, da dieses in sich geschlossen ist. Der folgende Ansatz ist deswegen auch leider nicht perfekt, sollte aber in den meisten F√§llen ausreichend sein. Auf diese Einschr√§nkung gehe ich gleich noch etwas genauer ein. Grunds√§tzlich nutze ich aber einen <code>MutationObserver</code> und gebe diesem einen Selektor, welche entweder das n√§chste Element mit einem <code>dir</code>-Attribut oder das <code>Document</code> an sich ist. √Ñhnlich der EventListener werden auch Observer im <code>connectedCallback</code> aktiviert und im <code>disconnectedCallback</code> deaktiviert.</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ImageComparison</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">state</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> isRtl<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> readingDirectionObserver<span class="token operator">!</span><span class="token operator">:</span> MutationObserver<span class="token punctuation">;</span>

  <span class="token comment">/**
   * Callback to handle any mutations made to the dir-attribute
   */</span>
  <span class="token keyword">private</span> <span class="token function-variable function">readingDirectionHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span>mutations<span class="token operator">:</span> MutationRecord<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> mutation <span class="token keyword">of</span> mutations<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>attributeName <span class="token operator">===</span> <span class="token string">'dir'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> dir <span class="token punctuation">}</span> <span class="token operator">=</span> mutation<span class="token punctuation">.</span>target <span class="token keyword">as</span> HTMLElement<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isRtl <span class="token operator">=</span> dir <span class="token operator">===</span> <span class="token string">'rtl'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">/**
   * Component is added to the document's DOM, setup readingDirectionObserver
   */</span>
  override <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>readingDirectionObserver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>readingDirectionHandler
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Find closest element with a dir attribute by traversing upwards</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>textDirectionElement <span class="token operator">=</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'[dir]'</span><span class="token punctuation">)</span> <span class="token operator">??</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>ownerDocument<span class="token operator">?.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span>

    <span class="token comment">// Found one? Is it 'rtl'?</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isRtl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>textDirectionElement<span class="token punctuation">.</span>dir <span class="token operator">===</span> <span class="token string">'rtl'</span><span class="token punctuation">;</span>

    <span class="token comment">// Start observing üîç</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>readingDirectionObserver<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>textDirectionElement<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      attributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Stop observing the dir attribute
   */</span>
  override <span class="token function">disconnectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">disconnectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>readingDirectionObserver<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>In den aller meisten F√§llen ist die folgende Integration ausreichend:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rtl-container<span class="token punctuation">"</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rtl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image-comparison</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- Content --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image-comparison</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>Die Component w√ºrde korrekterweise in rtl gelesen und genutzt werden k√∂nnen. Was nicht funktionieren w√ºrde, ist das die Component selbst in einem <code>Slot</code> oder im ShadowDOM benutzt wird. Es ist auf jeden Fall eine Limitierung. Umgehen k√∂nnte man das eventuell noch in dem man ein weiteres Attribut f√ºr die Component selbst einf√ºhrt. Ich denke man kann damit aber leben. Die meisten Personen mit denen ich gesprochen habe, die ein rtl-Layout betreffen w√ºrde, w√§ren zum Beispiel gar nicht davon ausgegangen, dass sich die Bilder drehen m√ºssten. Das ist nat√ºrlich nur anekdotisch.</p>
</section>
<section>
<h2 id="drei-components-in-einer"><a class="header-anchor" href="#drei-components-in-einer">Drei Components in einer</a></h2>
<p>Sollte man wirklich drei Components in einer verwirklichen? Wahrscheinlich eher nicht, aber interessant war es trotzdem und in meinen Tests mit einem √§lteren Smartphone gab es auch nicht wirklich Performance Probleme. Um &quot;live&quot; zwischen den Varianten wechseln zu k√∂nnen, bin ich wie folgt vorgegangen.<br>
Einen Type f√ºr Varianten definieren:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Variants</span> <span class="token operator">=</span> <span class="token string">'overlay'</span> <span class="token operator">|</span> <span class="token string">'slider'</span> <span class="token operator">|</span> <span class="token string">'split'</span><span class="token punctuation">;</span></code></pre>
<p>Eine Property f√ºr die Component definieren:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> variant<span class="token operator">:</span> Variants <span class="token operator">=</span> <span class="token string">'slider'</span><span class="token punctuation">;</span></code></pre>
<p>Mit Hilfe dieses Decorators wird ein Attribut erstellt auf dessen √Ñnderungen automatisch reagiert werden kann und bei Bedarf neu gerendert wird.</p>
<p>Templates definieren und auf Property reagieren lassen:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sliderTemplate <span class="token operator">=</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> overlayTemplate <span class="token operator">=</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> splitTemplate <span class="token operator">=</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token generic-function"><span class="token function">choose</span><span class="token generic class-name"><span class="token operator">&lt;</span>Variants<span class="token punctuation">,</span> TemplateResult<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>variant<span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span><span class="token string">'slider'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> sliderTemplate<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">'overlay'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> overlayTemplate<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">'split'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> splitTemplate<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Die zu Lit geh√∂rende <a href="https://lit.dev/docs/templates/directives/#choose" target="_blank" rel="noopener noreferrer"><code>choose</code></a>-Direktive kann nun auf diese Art typsicher eines von drei Templates rendern und dies allein durch das √§ndern des <code>variant</code>-Attributes:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image-comparison</span> <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>slider<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image-comparison</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image-comparison</span> <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>overlay<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image-comparison</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image-comparison</span> <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>split<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image-comparison</span><span class="token punctuation">></span></span></code></pre>
<section>
<h3 id="warum-das-eigentlich-nicht-sinnvoll-ist"><a class="header-anchor" href="#warum-das-eigentlich-nicht-sinnvoll-ist">Warum das eigentlich nicht sinnvoll ist</a></h3>
</section>
</section>
<section>
<h2 id="integration-auf-websites-und-in-frameworks"><a class="header-anchor" href="#integration-auf-websites-und-in-frameworks">Integration auf Websites und in Frameworks</a></h2>
<p>Um diese Component beispielsweise in WordPress zu integrieren, reicht es aus, folgendes Script-Tag zum gew√ºnschten Template hinzuzuf√ºgen und √ºber deren Slots zu konfigurieren.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/image-comparison-component/dist/src/image-comparison.js?module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image-comparison</span>
  <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>slider<span class="token punctuation">"</span></span>
  <span class="token attr-name">sliderPrompt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Move the slider to compare<span class="token punctuation">"</span></span>
  <span class="token attr-name">overlayPrompt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Tap and hold to compare<span class="token punctuation">"</span></span>
<span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label-before<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Ohne Filter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label-after<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Graustufen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image-before<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/2023/before.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Rote Zierquitte<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image-after<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/2023/after.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Rote Zierquitte (Graustufen)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image-comparison</span><span class="token punctuation">></span></span></code></pre>
<p>In anderen Umgebungen sieht das dann √§hnlich aus. Wenn man die Component √ºber NPM installiert hat und dessen Attribute √ºber Radio Buttons √§ndern m√∂chte k√∂nnte man so etwas machen:</p>
<pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token string">'image-comparison-component/image-comparison.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> imageComparisonDemoComponent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>
  <span class="token string">'#image-comparison-demo'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> radioButtonVariants <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'input[name="variant"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

radioButtonVariants<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>radioButton<span class="token punctuation">)</span> <span class="token operator">=></span>
  radioButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    imageComparisonDemoComponent<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'variant'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</section>
<section>
<h2 id="fazit"><a class="header-anchor" href="#fazit">Fazit</a></h2>
<p>Die Arbeit an dieser Component hatte ich bereits vor einer Weile abgeschlossen und konnte jetzt durch das Schreiben des Posts noch einiges dazu lernen. Dazu z√§hlte auf jeden Fall das hinzuf√ºgen von Default-Styles, die Integration in einen statischen Seitengenerator und insbesondere das Handling des <code>rtl</code>-Attributs. Etwas sp√§ter in der Entwicklung habe ich dann auch noch eine Component Library entdeckt, welche ebenfalls in Lit geschrieben ist und auch eine solche Component enth√§lt. Wer also eine ausgewachsenere Variante nutzen m√∂chte, dem kann ich nur <a href="https://shoelace.style/components/image-comparer" target="_blank" rel="noopener noreferrer">Shoelace</a> empfehlen. Viel Spa√ü mit der Component :)</p>
</section>
<section>
<h2 id="update-rtl-bugfix"><a class="header-anchor" href="#update-rtl-bugfix">Update: RTL Bugfix</a></h2>
</section>

      </main>

      
        <aside>
          <toc-observer observeParent>
            <div slot="toc">
              <nav class="toc">
                <ol>
                    
                    <li><a href="#slider">Slider</a>
            
                <ol>
                    
                    <li><a href="#html-and-css">HTML & CSS</a>
            		</li>

                    <li><a href="#entwicklung-der-slider-funktion">Entwicklung der Slider-Funktion</a>
            		</li>

                    <li><a href="#barrierefreiheit-des-sliders">Barrierefreiheit des Sliders</a>
            		</li>

                    <li><a href="#housekeeping-mit-lifecycle-callbacks">Housekeeping üßΩ mit Lifecycle-Callbacks</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#overlay">Overlay</a>
            		</li>

                    <li><a href="#split">Split</a>
            		</li>

                    <li><a href="#custom-events">Custom Events</a>
            		</li>

                    <li><a href="#internationalisierung">Internationalisierung</a>
            		</li>

                    <li><a href="#drei-components-in-einer">Drei Components in einer</a>
            
                <ol>
                    
                    <li><a href="#warum-das-eigentlich-nicht-sinnvoll-ist">Warum das eigentlich nicht sinnvoll ist</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#integration-auf-websites-und-in-frameworks">Integration auf Websites und in Frameworks</a>
            		</li>

                    <li><a href="#fazit">Fazit</a>
            		</li>

                    <li><a href="#update-rtl-bugfix">Update: RTL Bugfix</a>
            		</li>
                </ol>
            </nav>
            </div>
          </toc-observer>
        </aside>
      
    </div>

    
  
  <script>
    if ('serviceWorker' in navigator) {
      navigator
        .serviceWorker
        .register('/sw.js');
    }
  </script>


    <footer>
  <span id="copyright">
    ¬© Tony Spegel
    2024
  </span>
  <ul class="footer-links">
    
      <li>
        <a href="/impressum/">Impressum</a>
      </li>
    
      <li>
        <a href="/datenschutzerklaerung/">Datenschutzerkl√§rung</a>
      </li>
    
      <li>
        <a href="/barrierefreiheit/">Barrierefreiheit</a>
      </li>
    
      <li>
        <a href="/feed/feed.xml">RSS</a>
      </li>
    
  </ul>
</footer>

  </body>
</html>
